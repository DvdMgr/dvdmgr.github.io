<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" />
        <title>Spacemacs for ns-3 development</title>
        <meta charset="UTF-8">
        <meta name="description" content="Setting up Spacemacs to work with ns-3 development">
        <meta name="keywords" content="Spacemacs,ns-3,emacs">
        <meta name="author" content="Davide Magrin">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>

        <h3 class="post-title">Spacemacs for ns-3 development</h3>

        <p>
            This blog post details my <a href="http://spacemacs.org/">Spacemacs</a> setup for
            editing <a href="http://www.nsnam.org/">ns-3</a> projects.
        </p>

        <h4>Autocompletion</h4>

        <p>For both autocompletion and syntax checking I use
            <a href="https://github.com/Andersbakken/rtags">rtags</a>.</p>

        <p>
            To let rtags know of the compile_commands.json compilation
            database, symlink it:
        </p>

        <pre><code>
cd /path/to/ns-3
ln -s build/compile_commands.json compile_commands.json
        </code></pre>

        <h4>Style check on file save</h4>

        <p>
            Automatically apply ns-3's style check script upon save.
        </p>

        <pre><code>
(defun ns-3-format ()
    "Format current buffer according to ns-3 standards"
    (interactive)
    (set 'scriptpath "/path/to/ns-3/utils/check-style.py")
    (shell-command
    (concat scriptpath " -i -f " (buffer-file-name)))
    (revert-buffer nil t)
    )
        </code></pre>

        <p>
            To use the function, a customization of the project's
            .dir-locals.el is needed:
        </p>

        <pre><code>
((nil. ())
    (c++-mode (eval add-hook 'after-save-hook #'ns-3-format nil t)))
        </code></pre>

        <h4>Default compilation and testing commands</h4>

        <p>
            Default project compilation and testing commands can also
            be specified in the dir-locals.el file:
        </p>

        <pre><code>
((nil . ((projectile-project-compilation-cmd . "./waf build")
        (projectile-project-test-cmd . "./test.py -s lorawan") )))
        </code></pre>

    </body>
</html>
